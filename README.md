## ◇ 課題内容

### 機能１ − １

- ユーザーアカウントを作成する機能 → 「register.ejs」から実行可能
- ログイン画面からログインする機能 → 「login.ejs」から実行可能
- ログインに成功した場合に、ログイン後の画面を表示する機能 → 「loginSuccess.ejs」

### 機能１ − ２

- 悪意のある別サイトからの、ユーザーアカウント作成の POST 処理で、ユーザーアカウントを作成出来ないようにしてください

→ CSRF 対策として、csurf モジュールを利用し、ユーザー登録のフォームに CSRF トークンを埋め込んでいます。

### 機能１ − ３

- ログインしていない状態で、ログイン後の画面の URL を入力した場合、ログイン画面を表示し、ログイン成功後、入力した URL の画面を表示してください

→ express-session を利用。ログインしていない状態で、ログイン後にアクセスが可能となるページにアクセスした場合は、「req.session.url」にアクセスしたページの URL を保存し、ログイン後にリダイレクトします。

- この機能の確認をするために、基本課題で作成した「ログイン後の画面」以外の URL で表示される画面を用意してください

→ ログイン後にアクセスが可能となるページは、「mypage.ejs」、「mypage2.ejs」の 2 ページを用意しています。

### 機能１ − ４

- ユーザがパスワードを忘れた場合の仕様を考え、機能を作ってください

→ 登録されているメールアドレスに、トークンが埋め込まれた URL をメールで送信し、ユーザーがメールに記載された URL をクリックすると、パスワードを変更するページにアクセスできます。パスワード入力フォームに埋め込まれたトークンとメールアドレスを利用して、ユーザーの検証を行った後にパスワードを変更できるようにしています。

---

## ◇ 実装したが、理解できていない箇所

- パスワード再発行のためのメールに付与するトークンを作成する際に利用した crypto モジュールの設定やどのように動いているのか
- csurf モジュールで作成した middleware の csrfProtection が、どのように動いているのか
- nodemailer を利用する際のメールサーバーがどのような設定になっているのか

---

## ◇ その他

- 全てのコードをご確認いただけるように、「.env」や「node_modules」などを「.gitignore」に記載していません。
- エラーハンドリングについて、対応が不十分です。
